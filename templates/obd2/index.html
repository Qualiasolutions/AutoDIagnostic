{% extends "layout.html" %}

{% block title %}OBD2 Diagnostics{% endblock %}

{% block head %}
<style>
    .hero-section {
        background-color: #232b36;
        border-radius: 8px;
        padding: 30px;
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
    }
    
    .hero-bg {
        position: absolute;
        right: 0;
        top: 0;
        height: 100%;
        opacity: 0.1;
        z-index: 1;
    }
    
    .feature-card {
        background-color: #232b36;
        border-radius: 8px;
        padding: 25px;
        height: 100%;
        transition: transform 0.3s;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
    }
    
    .feature-icon {
        font-size: 40px;
        margin-bottom: 20px;
        color: #17a2b8;
    }
    
    .feature-title {
        font-size: 20px;
        margin-bottom: 15px;
        color: #fff;
    }
    
    .feature-description {
        color: #adb5bd;
        margin-bottom: 0;
    }
    
    .connect-panel {
        background-color: #232b36;
        border-radius: 8px;
        padding: 30px;
        margin-bottom: 30px;
        text-align: center;
    }
    
    .connection-options {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
    }
    
    .connection-option {
        background-color: #2c3542;
        border-radius: 8px;
        padding: 20px;
        width: 230px;
        text-align: center;
        cursor: pointer;
        transition: transform 0.3s, background-color 0.3s;
    }
    
    .connection-option:hover {
        transform: translateY(-5px);
        background-color: #343e50;
    }
    
    .connection-option.selected {
        border: 2px solid #17a2b8;
        background-color: #343e50;
    }
    
    .connection-icon {
        font-size: 48px;
        margin-bottom: 15px;
        color: #17a2b8;
    }
    
    .connection-title {
        font-size: 18px;
        margin-bottom: 10px;
        color: #fff;
    }
    
    .connection-description {
        color: #adb5bd;
        font-size: 14px;
        margin-bottom: 0;
    }
    
    .how-it-works {
        background-color: #232b36;
        border-radius: 8px;
        padding: 30px;
        margin-bottom: 30px;
    }
    
    .step-card {
        background-color: #2c3542;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 15px;
        display: flex;
        align-items: flex-start;
    }
    
    .step-number {
        background-color: #17a2b8;
        color: #fff;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 15px;
        flex-shrink: 0;
    }
    
    .step-content {
        flex-grow: 1;
    }
    
    .step-title {
        font-size: 18px;
        margin-bottom: 10px;
        color: #fff;
    }
    
    .step-description {
        color: #adb5bd;
        margin-bottom: 0;
    }
    
    .compatibility-section {
        background-color: #232b36;
        border-radius: 8px;
        padding: 30px;
        margin-bottom: 30px;
    }
    
    .compatibility-title {
        color: #17a2b8;
        margin-bottom: 20px;
    }
    
    .compatibility-list {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
    }
    
    .compatibility-item {
        background-color: #2c3542;
        border-radius: 20px;
        padding: 8px 15px;
        font-size: 14px;
    }
    
    .alert-guide {
        background-color: #2c3542;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="hero-content">
            <div class="row">
                <div class="col-lg-8">
                    <h1 class="display-4 mb-3">OBD2 Diagnostic Tool</h1>
                    <p class="lead mb-4">Connect directly to your vehicle's onboard diagnostics system to diagnose issues, read sensor data, and get AI-powered repair recommendations.</p>
                    <div class="d-flex">
                        <a href="{{ url_for('obd2_connect') }}" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-plug me-2"></i> Connect to Vehicle
                        </a>
                        <a href="#how-it-works" class="btn btn-outline-secondary btn-lg">
                            <i class="fas fa-info-circle me-2"></i> How It Works
                        </a>
                    </div>
                </div>
                <div class="col-lg-4 d-none d-lg-block text-center">
                    <img src="https://cdn4.iconfinder.com/data/icons/car-maintenance-2/64/car-service-diagnostics-tool-vehicle-512.png" alt="OBD2 Diagnostic" style="max-width: 200px;">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Connection Panel -->
    <div class="connect-panel">
        <h2><i class="fas fa-link me-2"></i> Connect to Your Vehicle</h2>
        <p class="text-muted">Choose your preferred connection method to begin diagnosing your vehicle.</p>
        
        <div class="connection-options">
            <div class="connection-option selected" data-connection="usb" onclick="selectConnection(this, 'usb')">
                <i class="fas fa-usb connection-icon"></i>
                <h4 class="connection-title">USB Cable</h4>
                <p class="connection-description">Connect directly using an OBD2-to-USB cable for fast and reliable diagnosis.</p>
            </div>
        </div>
        
        <div class="mt-4">
            <a href="{{ url_for('obd2_connect') }}" id="connect-button" class="btn btn-primary btn-lg">
                <i class="fas fa-plug me-2"></i> Connect via USB
            </a>
        </div>
    </div>
    
    <!-- Feature Cards -->
    <h2 class="mb-4"><i class="fas fa-star me-2"></i> Key Features</h2>
    <div class="row mb-5">
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <i class="fas fa-microchip feature-icon"></i>
                <h3 class="feature-title">Read Diagnostic Trouble Codes</h3>
                <p class="feature-description">Connect to your vehicle's ECU to read and interpret diagnostic trouble codes. Find out exactly why your check engine light is on.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <i class="fas fa-tachometer-alt feature-icon"></i>
                <h3 class="feature-title">Real-Time Sensor Data</h3>
                <p class="feature-description">Monitor your engine's vital signs in real-time with live data from dozens of sensors, including RPM, temperature, and oxygen levels.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <i class="fas fa-robot feature-icon"></i>
                <h3 class="feature-title">AI-Powered Diagnostics</h3>
                <p class="feature-description">Our Claude AI analyzes your vehicle's data to provide accurate diagnostics and specific repair recommendations tailored to your vehicle.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <i class="fas fa-wrench feature-icon"></i>
                <h3 class="feature-title">Repair Recommendations</h3>
                <p class="feature-description">Get detailed repair instructions with step-by-step guidance, including DIY options and professional repair estimates.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <i class="fas fa-camera feature-icon"></i>
                <h3 class="feature-title">Visual Diagnostics</h3>
                <p class="feature-description">Take photos of vehicle components for AI-enhanced visual inspection to identify visible issues and damage.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <i class="fas fa-microphone feature-icon"></i>
                <h3 class="feature-title">Audio Analysis</h3>
                <p class="feature-description">Record unusual sounds and noises from your vehicle for AI analysis to identify potential mechanical issues.</p>
            </div>
        </div>
    </div>
    
    <!-- How It Works Section -->
    <div class="how-it-works" id="how-it-works">
        <h2 class="mb-4"><i class="fas fa-question-circle me-2"></i> How It Works</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4 class="step-title">Connect to Your Vehicle</h4>
                        <p class="step-description">Plug the OBD2 adapter into your vehicle's diagnostic port (usually located under the dashboard) and connect the USB cable to your device.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4 class="step-title">Scan for Trouble Codes</h4>
                        <p class="step-description">The app will scan your vehicle's computer for any diagnostic trouble codes (DTCs) that might be triggering warning lights.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4 class="step-title">Review Live Data</h4>
                        <p class="step-description">View real-time sensor readings from your vehicle, including engine RPM, temperature, pressure readings, and more.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4 class="step-title">Capture Additional Data (Optional)</h4>
                        <p class="step-description">Take photos of components or record sounds to provide additional diagnostic information to the AI assistant.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4 class="step-title">AI Analysis</h4>
                        <p class="step-description">Our Claude AI analyzes all the collected data to provide a comprehensive diagnosis of your vehicle's issues.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <h4 class="step-title">Get Repair Recommendations</h4>
                        <p class="step-description">Receive detailed repair recommendations, including DIY steps, estimated costs, and professional repair options.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Compatibility Section -->
    <div class="compatibility-section">
        <h2 class="compatibility-title"><i class="fas fa-check-circle me-2"></i> Vehicle Compatibility</h2>
        <p>This diagnostic tool is compatible with most vehicles manufactured after 1996 (OBDII/EOBD standards):</p>
        
        <div class="row">
            <div class="col-md-6">
                <h5><i class="fas fa-car me-2"></i> Supported Vehicles:</h5>
                <div class="compatibility-list">
                    <span class="compatibility-item">Ford</span>
                    <span class="compatibility-item">Toyota</span>
                    <span class="compatibility-item">Honda</span>
                    <span class="compatibility-item">Chevrolet</span>
                    <span class="compatibility-item">BMW</span>
                    <span class="compatibility-item">Mercedes-Benz</span>
                    <span class="compatibility-item">Audi</span>
                    <span class="compatibility-item">Volkswagen</span>
                    <span class="compatibility-item">Nissan</span>
                    <span class="compatibility-item">Hyundai</span>
                    <span class="compatibility-item">Kia</span>
                    <span class="compatibility-item">Subaru</span>
                    <span class="compatibility-item">Mazda</span>
                    <span class="compatibility-item">Lexus</span>
                    <span class="compatibility-item">And many more...</span>
                </div>
            </div>
            <div class="col-md-6">
                <h5><i class="fas fa-cogs me-2"></i> Supported Protocols:</h5>
                <div class="compatibility-list">
                    <span class="compatibility-item">ISO 9141-2</span>
                    <span class="compatibility-item">ISO 14230-4 (KWP2000)</span>
                    <span class="compatibility-item">ISO 15765-4 (CAN)</span>
                    <span class="compatibility-item">SAE J1850 VPW</span>
                    <span class="compatibility-item">SAE J1850 PWM</span>
                </div>
            </div>
        </div>
        
        <div class="alert-guide alert alert-info mt-4">
            <h5><i class="fas fa-info-circle me-2"></i> Not sure if your vehicle is compatible?</h5>
            <p class="mb-0">Look for the OBD2 port in your vehicle (usually under the dashboard on the driver's side) and check your vehicle's manufacturing date. Most vehicles sold in the United States after 1996 and in Europe after 2001 are required to be OBD2 compliant.</p>
        </div>
    </div>
    
    <!-- Action Button -->
    <div class="text-center mb-5 mt-4">
        <a href="{{ url_for('obd2_connect') }}" class="btn btn-primary btn-lg">
            <i class="fas fa-plug me-2"></i> Start Diagnostic Now
        </a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function selectConnection(element, type) {
        // Remove selected class from all options
        document.querySelectorAll('.connection-option').forEach(option => {
            option.classList.remove('selected');
        });
        
        // Add selected class to clicked option
        element.classList.add('selected');
        
        // Update connect button text
        const connectButton = document.getElementById('connect-button');
        
        if (type === 'usb') {
            connectButton.innerHTML = '<i class="fas fa-plug me-2"></i> Connect via USB';
            connectButton.href = "{{ url_for('obd2_connect') }}";
        }
    }
</script>
{% endblock %}